<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="alternate" type="application/rss+xml" href="/resources/rss.xml" title="Enarx RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/resources/atom.xml" title="Enarx Atom Feed">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://buttons.github.io/buttons.js" async></script><title data-react-helmet="true">Trust Architecture | Enarx</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://enarx.dev/docs/Technical/Trust-Architecture"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Trust Architecture | Enarx"><meta data-react-helmet="true" name="description" content="Exactly what layers in the stack trust each other is a key issue for Enarx.  This diagram gives a simple view of the various layers in the VM case (e.g. with AMD SEV), and what their role is."><meta data-react-helmet="true" property="og:description" content="Exactly what layers in the stack trust each other is a key issue for Enarx.  This diagram gives a simple view of the various layers in the VM case (e.g. with AMD SEV), and what their role is."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://enarx.dev/docs/Technical/Trust-Architecture"><link data-react-helmet="true" rel="alternate" href="https://enarx.dev/docs/Technical/Trust-Architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://enarx.dev/docs/Technical/Trust-Architecture" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.85140e14.css">
<link rel="preload" href="/assets/js/runtime~main.c2a0d8df.js" as="script">
<link rel="preload" href="/assets/js/main.c8519ab8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Enarx" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Enarx" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Enarx</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Start/Introduction">Docs</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/meetings">Meetings</a><a class="navbar__item navbar__link" href="/events">Events</a><a href="https://chat.enarx.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-button" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star enarx/enarx on GitHub"><span>Star<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Technical Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Problem">Problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Design">Design Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Threat">Threat Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Technical/Trust-Architecture">Trust Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/TEE">TEEs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Components">Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Runtime">Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/WebAssembly">WebAssembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Process-Flow">Process-Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Syscall-Proxy">Syscall Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Hardware">Hardware and CPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Builds">Reproducible Builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Vulnerabilities-Attacks">Vulnerabilities and Attacks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/AMD-SEV">AMD SEV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/AMD-SEV-Attestation">AMD SEV Remote Attestation Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/AMD-SNP">AMD-SNP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Intel-SGX">Intel SGX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Intel-SGX-Measurement">Intel-SGX-Measurement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Cases">Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/FAQ">FAQ</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Trust Architecture</h1></header><p>Exactly what layers in the stack trust each other is a key issue for Enarx.  This diagram gives a simple view of the various layers in the VM case (e.g. with <a href="https://github.com/enarx/enarx/wiki/SEV-architectural" target="_blank" rel="noopener noreferrer">AMD SEV</a>), and what their role is.</p><p><img src="https://raw.githubusercontent.com/enarx/enarx.github.io/main/assets/images/trust-architecture.png" alt="Enarx trust architecture (VM case)"></p><p>Enarx provides four layers in the run-time stack.  Working from the lowest up, they are:</p><ol><li>a VMM (Virtual Memory Manager)</li><li>a microkernel (Î¼kernel)</li><li>a WASM runtime (WebAssembly)</li><li>a WASI implementation (Web Assembly System Interface).</li></ol><p>All of these are cryptographically measured and checked at runtime before each deployment.  They are not the only layers in the stack, however.  Others include the CPU (in which layer we also include CPU firmware), the host kernel and the application itself.  See below for a little more detail about the trust architecture.</p><p>Note: Enarx does not use a TPM as part of its trust architecture.  See <a href="/docs/Technical/FAQ#is-enarx-a-host-attestation-project">Is Enarx a host attestation project?</a> and <a href="/docs/Technical/FAQ#does-enarx-useneed-a-tpm">Does Enarx use/need a TPM?</a> on the <a href="/docs/Technical/FAQ">FAQ page</a> for more details.</p><p>In this discussion, the party doing the trusting (the &quot;trustor&quot;) is the tenant, or client: the entity wishing to execute a workload, referred to in this architecture as the &quot;application&quot;.  A fundamental principle of the Enarx project is that the client does <em>not</em> trust the host, its owner or operator.  Although the host&#x27;s owner (or the host&#x27;s operator) may have trust requirements, these are not addressed in this discussion.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="components-and-associated-trust-domains">Components and associated trust domains<a aria-hidden="true" class="hash-link" href="#components-and-associated-trust-domains" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="cpu">CPU<a aria-hidden="true" class="hash-link" href="#cpu" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Trusted ðŸ’š </p><p>In order to do any standard computation, the CPU must be trusted to perform operations.  In the Enarx trust model, the validity of the CPU and firmware are both checked cryptographically at runtime, as they provide the hardware root of the trust for the entire architecture.  If either is found not to be valid, then the provisioning components of the Enarx system will not schedule an application to run on the host.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="kernel">Kernel<a aria-hidden="true" class="hash-link" href="#kernel" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Untrusted ðŸ”´</p><p>The kernel is that which is provided by the host on which the Enarx Keep is to be created.  It is under the control of the host&#x27;s owner/operator, and is therefore untrusted by the client.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="vmm-virtual-memory-manager">VMM (Virtual Memory Manager)<a aria-hidden="true" class="hash-link" href="#vmm-virtual-memory-manager" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Untrusted ðŸ”´</p><p>The VMM is provided by Enarx, and provides memory management for processes within the Enarx Keep, but is untrusted: specifically, it has access only to encrypted memory pages.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="microkernel-Î¼kernel">Microkernel (Î¼kernel)<a aria-hidden="true" class="hash-link" href="#microkernel-Î¼kernel" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Trusted ðŸ’š</p><p>The microkernel is provided by Enarx, and is trusted to perform standard kernel operations.  </p><h3 class="anchor anchorWithStickyNavbar_31ik" id="wasm-webassembly-runtime">WASM (WebAssembly runtime)<a aria-hidden="true" class="hash-link" href="#wasm-webassembly-runtime" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Trusted ðŸ’š</p><p>The <a href="https://webassembly.org/" target="_blank" rel="noopener noreferrer">WASM</a> runtime is provided by Enarx, and is trusted to provide the runtime for the application within the Enarx Keep, and includes silicon architecture specific JIT (Just In Time) compilation for performance optimisation.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="wasi-webassembly-system-interface">WASI (WebAssembly System Interface)<a aria-hidden="true" class="hash-link" href="#wasi-webassembly-system-interface" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong> Trusted ðŸ’š</p><p>The <a href="https://wasi.dev/" target="_blank" rel="noopener noreferrer">WASI</a> layer is provided by Enarx, and is an interface for WebAssembly applications running on server-type systems (rather than in browsers, for instance).  It is focused on security and portability, and is trusted.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="application">Application<a aria-hidden="true" class="hash-link" href="#application" title="Direct link to heading">â€‹</a></h3><p><strong>Status:</strong>  Trusted ðŸ’š</p><p>The application layer is the workload provided by the client to run within the Enarx Keep.  It is not provided by Enarx, but is considered trusted by the client as it was provided by them.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="diagram-of-enarx-components">Diagram of Enarx components<a aria-hidden="true" class="hash-link" href="#diagram-of-enarx-components" title="Direct link to heading">â€‹</a></h2><p>Here is another view of the detail of Enarx components:<br>
<img src="https://raw.githubusercontent.com/enarx/enarx.github.io/main/assets/images/enarx-component-detail.png" alt="Enarx component details image"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/enarx/docs/blob/main/docs/Technical/Trust-Architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Technical/Threat"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Threat Model</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Technical/TEE"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">TEEs<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#components-and-associated-trust-domains" class="table-of-contents__link toc-highlight">Components and associated trust domains</a><ul><li><a href="#cpu" class="table-of-contents__link toc-highlight">CPU</a></li><li><a href="#kernel" class="table-of-contents__link toc-highlight">Kernel</a></li><li><a href="#vmm-virtual-memory-manager" class="table-of-contents__link toc-highlight">VMM (Virtual Memory Manager)</a></li><li><a href="#microkernel-Î¼kernel" class="table-of-contents__link toc-highlight">Microkernel (Î¼kernel)</a></li><li><a href="#wasm-webassembly-runtime" class="table-of-contents__link toc-highlight">WASM (WebAssembly runtime)</a></li><li><a href="#wasi-webassembly-system-interface" class="table-of-contents__link toc-highlight">WASI (WebAssembly System Interface)</a></li><li><a href="#application" class="table-of-contents__link toc-highlight">Application</a></li></ul></li><li><a href="#diagram-of-enarx-components" class="table-of-contents__link toc-highlight">Diagram of Enarx components</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/Start/Introduction">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Installation/Introduction">Installation Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Contributing/Introduction">Contributing Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Technical/Introduction">Technical Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/resources">Resources</a></li><li class="footer__item"><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.enarx.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/meetings">Meetings</a></li><li class="footer__item"><a class="footer__link-item" href="/events">Events</a></li><li class="footer__item"><a href="https://chat.enarx.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/enarxproject" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Enarx - 2021 - Creative Commons</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c2a0d8df.js"></script>
<script src="/assets/js/main.c8519ab8.js"></script>
</body>
</html>