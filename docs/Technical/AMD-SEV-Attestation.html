<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.7">
<link rel="alternate" type="application/rss+xml" href="/resources/rss.xml" title="Enarx RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/resources/atom.xml" title="Enarx Atom Feed">
<script src="https://buttons.github.io/buttons.js"></script>
<script src="https://buttons.github.io/buttons.js" async></script><title data-react-helmet="true">AMD SEV Remote Attestation Protocol | Enarx</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://enarx.dev/docs/Technical/AMD-SEV-Attestation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="AMD SEV Remote Attestation Protocol | Enarx"><meta data-react-helmet="true" name="description" content="Summary"><meta data-react-helmet="true" property="og:description" content="Summary"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://enarx.dev/docs/Technical/AMD-SEV-Attestation"><link data-react-helmet="true" rel="alternate" href="https://enarx.dev/docs/Technical/AMD-SEV-Attestation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://enarx.dev/docs/Technical/AMD-SEV-Attestation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.85140e14.css">
<link rel="preload" href="/assets/js/runtime~main.f0d04daa.js" as="script">
<link rel="preload" href="/assets/js/main.c000afde.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Enarx" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Enarx" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Enarx</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/Start/Introduction">Docs</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/meetings">Meetings</a><a class="navbar__item navbar__link" href="/events">Events</a><a href="https://chat.enarx.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-button" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star enarx/enarx on GitHub"><span>Star<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Installation Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Technical Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Problem">Problem</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Design">Design Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Threat">Threat Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Trust-Architecture">Trust Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/TEE">TEEs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Components">Components</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Runtime">Runtime</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/WebAssembly">WebAssembly</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Process-Flow">Process-Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Syscall-Proxy">Syscall Proxy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Hardware">Hardware and CPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Builds">Reproducible Builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Vulnerabilities-Attacks">Vulnerabilities and Attacks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/AMD-SEV">AMD SEV</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Technical/AMD-SEV-Attestation">AMD SEV Remote Attestation Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/AMD-SNP">AMD-SNP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Intel-SGX">Intel SGX</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Intel-SGX-Measurement">Intel-SGX-Measurement</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/Cases">Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Technical/FAQ">FAQ</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AMD SEV Remote Attestation Protocol</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="summary">Summary<a aria-hidden="true" class="hash-link" href="#summary" title="Direct link to heading">​</a></h2><p>A tenant may choose to deploy their workload into an AMD SEV-based Enarx Keep.
This document describes a client-server protocol to allow a tenant to perform
attestation with a remote AMD SEV Enarx Keep.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="goal">Goal<a aria-hidden="true" class="hash-link" href="#goal" title="Direct link to heading">​</a></h2><p>This protocol allows a tenant to:</p><ol><li>Verify the platform certificate chain belonging to the remote host where
the Enarx Keep is constructed</li><li>Establish a secure channel with the AMD Secure Processor (AMD SP) on the
remote host</li><li>Compare its own measurement of the guest&#x27;s initial state with the AMD SP&#x27;s
measurement from the untrusted host</li><li>Safely deliver its workload to the AMD SP</li></ol><h2 class="anchor anchorWithStickyNavbar_31ik" id="theory-of-operation">Theory of Operation<a aria-hidden="true" class="hash-link" href="#theory-of-operation" title="Direct link to heading">​</a></h2><p>This protocol maps the regular SEV launch procedure onto a simple client-server
model (client sends request to server; server sends its response to client).
In fact, the message formats are comprised of data structures defined in the
AMD SEV specification.</p><p>It is a short, serialized exchange. More importantly, however, it is meant to
be an “atomic” transaction. What this means is that the client and the backend
complete attestation successfully in this exchange or they don’t. There are no
“in-between” end conditions. Therefore, neither party should have any
expectation of “retrying” a previous step. It is always forward progress or
none at all. As the orchestrator, it is the Keep Manager’s responsibility to
know if the keep becomes defunct during attestation, launch, or normal
operation. It is expected that the Keep Manager will inform the client of an
appropriate error condition and tear down the defunct Keep if necessary.</p><p>A complete demonstration of this protocol in action is described in a Message
Sequence Diagram later on.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="message-formats">Message Formats<a aria-hidden="true" class="hash-link" href="#message-formats" title="Direct link to heading">​</a></h2><p>The data structures defined in the SEV specification form the substrate for this
protocol. As a result, message payloads are binary structures. The messages for
this protocol are <a href="http://cbor.io/" target="_blank" rel="noopener noreferrer">CBOR-encoded</a>. They will be represented here
in <a href="https://tools.ietf.org/html/rfc8610" target="_blank" rel="noopener noreferrer">Concise Data Definition Language (CDDL)</a>.</p><p>The MIME-types for messages in this protocol will adhere to the MIME-type
convention, and will be arranged like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">application/vnd.enarx.att.sev+cbor; msg=$MESSAGE</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>where <code>$MESSAGE</code> is the message type described in the corresponding message
formats below.</p><p>The CBOR representation for a message is:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">message = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      certificate-chain-naples //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      certificate-chain-rome //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      launch-start //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      measurement //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      secret //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      finish</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>where the key for these structures are the corresponding string:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&quot;certificate-chain-naples&quot; /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;certificate-chain-rome&quot; /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;launch-start&quot; /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;measurement&quot; /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;secret&quot; /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;finish&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A message&#x27;s <code>mimetype</code> MUST correspond to its CBOR representation.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="certificate-chain">Certificate Chain<a aria-hidden="true" class="hash-link" href="#certificate-chain" title="Direct link to heading">​</a></h3><p>The certificate chain varies depending on the processor hardware
generation.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="naples-certificate-chain">Naples Certificate Chain<a aria-hidden="true" class="hash-link" href="#naples-certificate-chain" title="Direct link to heading">​</a></h4><p><strong>MIME type</strong>: certificate-chain-naples</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">certificate-chain-naples = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ark&quot;: certificate-ca-small,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ask&quot;: certificate-ca-small,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;pdh&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;pek&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;oca&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;cek&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="rome-certificate-chain">Rome Certificate Chain<a aria-hidden="true" class="hash-link" href="#rome-certificate-chain" title="Direct link to heading">​</a></h4><p><strong>MIME type</strong>: certificate-chain-rome</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">certificate-chain-rome = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ark&quot;: certificate-ca-large,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ask&quot;: certificate-ca-large,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;pdh&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;pek&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;oca&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;cek&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="launch-start">Launch Start<a aria-hidden="true" class="hash-link" href="#launch-start" title="Direct link to heading">​</a></h3><p><strong>MIME type</strong>: launch-start</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">launch-start = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;policy&quot;: policy,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;pdh&quot;: certificate-sev,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;session&quot;: session,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="measurement">Measurement<a aria-hidden="true" class="hash-link" href="#measurement" title="Direct link to heading">​</a></h3><p><strong>MIME type</strong>: measurement</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">measurement = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;build&quot;: build,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;measurement&quot;: bytes .size 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nonce&quot;: bytes .size 16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="secret">Secret<a aria-hidden="true" class="hash-link" href="#secret" title="Direct link to heading">​</a></h3><p><strong>MIME type</strong>: secret</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">secret = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;header&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;iv&quot;: bytes .size 16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;mac&quot;: bytes .size 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;ciphertext&quot;: bytes,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="finish">Finish<a aria-hidden="true" class="hash-link" href="#finish" title="Direct link to heading">​</a></h3><p><strong>MIME type</strong>: finish</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">/* TODO */</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_31ik" id="interior-data-structure-cbor">Interior Data Structure CBOR<a aria-hidden="true" class="hash-link" href="#interior-data-structure-cbor" title="Direct link to heading">​</a></h4><p><strong>version</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">version = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;major&quot;: uint .size 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;minor&quot;: uint .size 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>build</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">build = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;version&quot;: version,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;build&quot;: uint .size 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>policy</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">policy = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;flags&quot;: uint .size 2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;minfw&quot;: version,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>certificate-sev</strong></p><p>This is an opaque, binary structure. See Appendix C in the AMD SEV specification.</p><p><strong>certificate-ca-large</strong></p><p>This is an opaque, binary structure. See Appendix B in the AMD SEV specification.</p><p><strong>certificate-ca-small</strong></p><p>This is an opaque, binary structure. See Appendix B in the AMD SEV specification.</p><p><strong>session</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">session = (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;nonce&quot;: bytes .size 16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;wrap_tk&quot;: bytes .size 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;wrap_iv&quot;: bytes .size 16,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;wrap_mac&quot;: bytes .size 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;policy_mac&quot;: bytes .size 32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="message-sequence-diagram">Message Sequence Diagram<a aria-hidden="true" class="hash-link" href="#message-sequence-diagram" title="Direct link to heading">​</a></h2><p><img src="https://raw.githubusercontent.com/wiki/enarx/enarx/images/amd-sev-remote-attestation.svg" alt="message sequence diagram"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="changelog">Changelog<a aria-hidden="true" class="hash-link" href="#changelog" title="Direct link to heading">​</a></h2><p>v4:</p><ul><li>All messages are CBOR-encoded</li><li>Add message/container-type representations</li><li>Certificates are opaque binary structures now, so remove the CBOR representations</li></ul><p>v3:</p><ul><li>Update all types to be cbor-encoded with CDDL descriptions</li><li>Separate types for Rome and Naples certificate chains</li><li>Add a configuration complete message</li></ul><p>v2:</p><ul><li>Only allow for 1 secret packet to be sent (changed from accommodating
potentially many secrets)</li><li>Add a message header to describe a packet&#x27;s MIME type &amp; the payload
length</li><li>Disambiguate term &quot;peer&quot; -- it represented both the Keep Manager and
the tenant (by proxy)</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/enarx/docs/blob/main/docs/Technical/AMD-SEV-Attestation.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/Technical/AMD-SEV"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->AMD SEV</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/Technical/AMD-SNP"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AMD-SNP<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#goal" class="table-of-contents__link toc-highlight">Goal</a></li><li><a href="#theory-of-operation" class="table-of-contents__link toc-highlight">Theory of Operation</a></li><li><a href="#message-formats" class="table-of-contents__link toc-highlight">Message Formats</a><ul><li><a href="#certificate-chain" class="table-of-contents__link toc-highlight">Certificate Chain</a></li><li><a href="#launch-start" class="table-of-contents__link toc-highlight">Launch Start</a></li><li><a href="#measurement" class="table-of-contents__link toc-highlight">Measurement</a></li><li><a href="#secret" class="table-of-contents__link toc-highlight">Secret</a></li><li><a href="#finish" class="table-of-contents__link toc-highlight">Finish</a></li></ul></li><li><a href="#message-sequence-diagram" class="table-of-contents__link toc-highlight">Message Sequence Diagram</a></li><li><a href="#changelog" class="table-of-contents__link toc-highlight">Changelog</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/Start/Introduction">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Installation/Introduction">Installation Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Contributing/Introduction">Contributing Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Technical/Introduction">Technical Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/resources">Resources</a></li><li class="footer__item"><a href="https://github.com/enarx/enarx" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://blog.enarx.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/meetings">Meetings</a></li><li class="footer__item"><a class="footer__link-item" href="/events">Events</a></li><li class="footer__item"><a href="https://chat.enarx.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/enarxproject" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Enarx - 2021 - Creative Commons</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f0d04daa.js"></script>
<script src="/assets/js/main.c000afde.js"></script>
</body>
</html>