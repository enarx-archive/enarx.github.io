"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[336],{3905:function(e,t,o){o.d(t,{Zo:function(){return u},kt:function(){return f}});var n=o(67294);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},u=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=d(o),f=r,p=h["".concat(l,".").concat(f)]||h[f]||c[f]||a;return o?n.createElement(p,i(i({ref:t},u),{},{components:o})):n.createElement(p,i({ref:t},u))}));function f(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=o.length,i=new Array(a);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<a;d++)i[d]=o[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,o)}h.displayName="MDXCreateElement"},96066:function(e,t,o){o.r(t),o.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return s},metadata:function(){return d},toc:function(){return c}});var n=o(83117),r=o(80102),a=(o(67294),o(3905)),i=["components"],s={},l=void 0,d={unversionedId:"Repo/iocuddle",id:"Repo/iocuddle",title:"iocuddle",description:"Nathaniel",source:"@site/docs/Repo/iocuddle.md",sourceDirName:"Repo",slug:"/Repo/iocuddle",permalink:"/docs/Repo/iocuddle",editUrl:"https://github.com/enarx/enarx.github.io/blob/main/docs/Repo/iocuddle.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"mmarinus",permalink:"/docs/Repo/mmarinus"},next:{title:"noted",permalink:"/docs/Repo/noted"}},u={},c=[],h={toc:c};function f(e){var t=e.components,o=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},h,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("iframe",{src:"https://www.youtube.com/embed/m3t4fq3R8nw",height:"480",width:"640",allowFullScreen:!0}),(0,a.kt)("hr",null),(0,a.kt)("p",null,"Nathaniel",(0,a.kt)("br",{parentName:"p"}),"\n","sev-iocuddle is next. And let's actually skip ahead because there's an iocuddle crate right here. And let's look at that. So iocuddle is a library for building runtime safe iocuddle interfaces. So if you've ever used iocuddle, it's a sycall that you can use on Linux. And it stands for IO control. And the original purpose for IO control was for doing things like setting terminal modes on a particular like your standard out or whatever. So you could set colors or you know, buffering or whatever. It's also used for control things like buffering on sockets and various other things. However, since that time, iocuddle has vastly expanded in its use, because it's sort of like the, if you want to do some operation on some file descriptor, you can define an iocuddle for it, like that's the standard way to extend the Linux kernel. And so today, there's literally hundreds, probably 1000s of these iocuddle, is usually how it's pronounced. The problem with iocuddle is that they are they rely specifically on C language features, which are very, very unsafe to use. And so what we actually want is we want a sort of safe wrapper around iocuddle, that allows us to define everything up front, and then all of our safety is guaranteed by the type system. And so iocuddle is a crate for doing this. And the the way iocuddle works is that iocuddle itself does not define any iocuddle, it just defines a framework for declaring iocuddle. And then you an example of declaring an iocuddle is here. So here's three of them on the screen right now. So this I've highlighted one iocuddle. Right now this is using classic mode. And you basically define the semantics of how that I iocuddle works. And then the resulting code can be safe, because it guarantees all the invariants of that iocuddle. And there's also a non classic mode. So there are two different sort of like eras for iocuddle. Early on in the Linux kernel, we would just basically define a number for your iocuddle. And then there would be no typing enforced. And then over time, they decided to be more systematic. And so they would have, let me find an example of a non classic modern interface, here at the bottom, as modern interfaces. So first of all, you would define a group. And that group number would say that all iocuddle within this group are related in some way. And then you would define whether it was a read iocuddle, a write iocuddle, or a write read iocuddle. And that would define the semantics around mutability of the objects that are passed in, and so forth. And basically, we use all this information we can to create a safe Rust interface, the resulting const that's used then can, let me see an example of it actually being used. Here's one. So you basically define the const, which has all the invariants of the iocuddleitself. And now you can safely call this on a file, like this tty at the top, because because we've wrapped it all in a safe way, it also means that the definition of the iocuddle is done once in a central place, and is then enforced by the type system for every other invocation. If we didn't do this, it means that every time we would try to call an iocuddle we would have to do all sorts of unsafe things. And this allows us to just do it in one place. And so if we go back now to the sev-iocuddle crate, this is also a crate we probably don't really want to maintain anymore, because this is the older versions of SEV. But you can see in here that we have, so here's one of the some of the KVM iocuddle that we've defined. And so we use iocuddle to do this, and these are SEV related iocuddle. But again, we don't actually use this crate anymore. We do use iocuddle in other places. So this is not the only place we use iocuddle, this is just a set of sev-iocuddle that we're no longer using."))}f.isMDXComponent=!0}}]);